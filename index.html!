<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Apple Shop ‚Äî Fresh Apples Online</title>
    <style>
        :root{
            --accent:#d0342c;
            --muted:#666;
            --bg:#f7f7f8;
            --card:#fff;
            --glass: rgba(255,255,255,0.6);
            font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        }
        *{box-sizing:border-box}
        html,body{height:100%;margin:0;background:var(--bg);color:#111}
        header{
            background:linear-gradient(90deg,#ffecec 0%, #fff 100%);
            border-bottom:1px solid rgba(0,0,0,0.04);
            padding:18px 20px;display:flex;align-items:center;justify-content:space-between;gap:16px;
        }
        .brand{display:flex;align-items:center;gap:12px;font-weight:700;}
        .logo{width:44px;height:44px;display:grid;place-items:center;border-radius:10px;background:var(--accent);color:white;font-size:20px}
        main{max-width:1100px;margin:26px auto;padding:0 20px;display:grid;grid-template-columns:1fr 340px;gap:24px}
        .hero{
            background:linear-gradient(180deg, rgba(255,255,255,0.7), rgba(255,255,255,0.9));
            padding:20px;border-radius:12px;display:flex;gap:20px;align-items:center;
            box-shadow:0 6px 18px rgba(0,0,0,0.05);
        }
        .hero .text h1{margin:0;font-size:22px}
        .hero .text p{margin:6px 0 0;color:var(--muted)}
        .grid{
            margin-top:18px;display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px;
        }
        .card{background:var(--card);border-radius:12px;padding:14px;display:flex;flex-direction:column;gap:10px;box-shadow:0 4px 12px rgba(0,0,0,0.04)}
        .apple-illustration{width:100%;height:120px;display:grid;place-items:center}
        .title{font-weight:600}
        .meta{color:var(--muted);font-size:13px}
        .controls{display:flex;gap:8px;align-items:center;margin-top:auto}
        .price{font-weight:700;color:var(--accent);margin-right:auto}
        button,select,input{font-family:inherit}
        .btn{
            background:var(--accent);color:white;border:0;padding:8px 12px;border-radius:8px;cursor:pointer;
            box-shadow:0 6px 14px rgba(208,52,44,0.12);
        }
        .btn.secondary{background:#eee;color:#111;box-shadow:none}
        .cart{
            position:sticky;top:22px;background:linear-gradient(180deg,#fff, #fbfbfb);padding:16px;border-radius:12px;border:1px solid rgba(0,0,0,0.04);
            box-shadow:0 12px 30px rgba(0,0,0,0.04);
            display:flex;flex-direction:column;gap:12px;height:fit-content;
        }
        .cart h2{margin:0 0 6px 0;font-size:16px}
        .cart-items{display:flex;flex-direction:column;gap:8px;max-height:360px;overflow:auto;padding-right:6px}
        .cart-item{display:flex;gap:8px;align-items:center;padding:8px;border-radius:8px;background:var(--glass)}
        .cart-item .name{font-size:14px}
        .cart-item .qty{margin-left:auto;color:var(--muted)}
        .totals{display:flex;justify-content:space-between;font-weight:700;margin-top:6px;color:#111}
        .empty{color:var(--muted);font-size:14px}
        footer{max-width:1100px;margin:22px auto;color:var(--muted);padding:0 20px;font-size:13px}
        @media (max-width:900px){
            main{grid-template-columns:1fr;gap:16px}
            .cart{position:static}
        }
        /* simple accessible focus */
        button:focus, select:focus {outline:3px solid rgba(208,52,44,0.18);outline-offset:2px}
    </style>
</head>
<body>
    <header>
        <div class="brand" role="banner">
            <div class="logo" aria-hidden="true">üçé</div>
            <div>
                <div>Apple Shop</div>
                <div style="font-size:12px;color:var(--muted)">Fresh apples delivered</div>
            </div>
        </div>
        <nav aria-label="Top">
            <button class="btn" id="open-cart" aria-haspopup="true" aria-controls="cart">View Cart</button>
        </nav>
    </header>

    <main>
        <section>
            <div class="hero" aria-hidden="true">
                <div style="width:120px;height:120px;border-radius:12px;background:linear-gradient(135deg,#fff4f3,#fff);display:grid;place-items:center;box-shadow:0 8px 20px rgba(208,52,44,0.08)">
                    <svg width="72" height="72" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                        <path d="M12 3c.6 0 2.2.8 3.2 1.8.9.9 1.8 2.6 1.8 3.2 0 1.6-1.3 3.6-2.9 4.8A8 8 0 0 1 12 21a8 8 0 0 1-2.1-8.2C10.5 10.6 12 8.9 12 7.1V3z" fill="#d0342c"/>
                        <path d="M9 2s-.9 1-1 2 1 1 1 1 1-1 1-2-1-1-1-1z" fill="#2b7a0b"/>
                    </svg>
                </div>
                <div class="text">
                    <h1>Fresh apples ‚Äî picked and shipped to your door</h1>
                    <p>Choose your favorite variety. Pack sizes from 1 lb to 10 lb. Local produce, sustainably packed.</p>
                </div>
            </div>

            <div class="grid" id="products" aria-live="polite">
                <!-- Product cards inserted by JS for clarity and maintainability -->
            </div>
        </section>

        <aside id="cart" class="cart" aria-label="Shopping cart">
            <h2>Your Cart</h2>
            <div id="cart-items" class="cart-items" aria-live="polite">
                <div class="empty">Your cart is empty</div>
            </div>
            <div class="totals">
                <div>Total</div>
                <div id="total-amount">$0.00</div>
            </div>
            <div style="display:flex;gap:8px;margin-top:8px">
                <button class="btn" id="checkout" disabled>Checkout</button>
                <button class="btn secondary" id="clear-cart">Clear</button>
            </div>
        </aside>
    </main>

    <footer>
        <div>¬© Apple Shop ‚Äî Demo storefront. Prices shown are illustrative.</div>
    </footer>

    <script>
        // Simple product data (could be replaced with API calls)
        const PRODUCTS = [
            { id: 'honeycrisp', name: 'Honeycrisp', price: 3.99, desc: 'Sweet, crisp, and juicy. Great for snacking.', weight: 'per lb' },
            { id: 'gala', name: 'Gala', price: 2.49, desc: 'Mild and aromatic, perfect for kids.', weight: 'per lb' },
            { id: 'fuji', name: 'Fuji', price: 2.99, desc: 'Firm texture with balanced sweetness.', weight: 'per lb' },
            { id: 'granny-smith', name: 'Granny Smith', price: 2.29, desc: 'Tart and crunchy, excellent for baking.', weight: 'per lb' },
            { id: 'braeburn', name: 'Braeburn', price: 2.79, desc: 'Bold flavor, great for salads.', weight: 'per lb' },
            { id: 'pink-lady', name: 'Pink Lady', price: 3.49, desc: 'Crisp with a tangy-sweet finish.', weight: 'per lb' }
        ];

        // CART MANAGEMENT
        const CART_KEY = 'apple_shop_cart_v1';
        let cart = JSON.parse(localStorage.getItem(CART_KEY) || '{}');

        function saveCart() {
            localStorage.setItem(CART_KEY, JSON.stringify(cart));
            renderCart();
        }

        function addToCart(productId, qty) {
            qty = Number(qty) || 1;
            if (!cart[productId]) cart[productId] = 0;
            cart[productId] += qty;
            saveCart();
        }

        function removeFromCart(productId) {
            delete cart[productId];
            saveCart();
        }

        function updateQty(productId, qty) {
            qty = Number(qty);
            if (qty <= 0) removeFromCart(productId);
            else { cart[productId] = qty; saveCart(); }
        }

        function clearCart() {
            cart = {};
            saveCart();
        }

        function cartTotal() {
            let total = 0;
            for (const id in cart) {
                const p = PRODUCTS.find(x => x.id === id);
                if (p) total += p.price * cart[id];
            }
            return total;
        }

        // RENDER PRODUCTS
        const productsContainer = document.getElementById('products');
        function renderProducts() {
            productsContainer.innerHTML = '';
            for (const p of PRODUCTS) {
                const card = document.createElement('article');
                card.className = 'card';
                card.innerHTML = `
                    <div class="apple-illustration" aria-hidden="true">
                        <svg width="76" height="76" viewBox="0 0 24 24" fill="none">
                            <path d="M16.5 3c-.9.1-2 1-2.6 1.8-.6.8-1.3 2.3-.7 3.6.9 2.2 3.2 3.5 5.3 3.6.1-1.6-.6-3.4-1.6-4.6C16.4 5.5 17.1 3.2 16.5 3z" fill="#d0342c"/>
                            <path d="M7 2s-.8 1-1 2 1 1 1 1 1-1 1-2-1-1-1-1z" fill="#2b7a0b"/>
                            <circle cx="9.5" cy="14" r="5.3" fill="#ffefef" opacity="0.6"/>
                        </svg>
                    </div>
                    <div>
                        <div class="title">${p.name}</div>
                        <div class="meta">${p.desc} ‚Ä¢ <span style="font-weight:600">$${p.price.toFixed(2)}</span> ${p.weight}</div>
                    </div>
                    <div class="controls">
                        <label for="qty-${p.id}" class="sr-only" style="display:none">Quantity</label>
                        <select id="qty-${p.id}" aria-label="Quantity for ${p.name}">
                            <option value="1">1 lb</option>
                            <option value="2">2 lb</option>
                            <option value="4">4 lb</option>
                            <option value="10">10 lb</option>
                        </select>
                        <button class="btn" data-add="${p.id}">Add</button>
                    </div>
                `;
                productsContainer.appendChild(card);
            }
        }

        // RENDER CART
        const cartItemsEl = document.getElementById('cart-items');
        const totalEl = document.getElementById('total-amount');
        const checkoutBtn = document.getElementById('checkout');

        function renderCart() {
            cartItemsEl.innerHTML = '';
            const keys = Object.keys(cart);
            if (keys.length === 0) {
                cartItemsEl.innerHTML = '<div class="empty">Your cart is empty</div>';
                totalEl.textContent = '$0.00';
                checkoutBtn.disabled = true;
                return;
            }

            for (const id of keys) {
                const product = PRODUCTS.find(p => p.id === id);
                if (!product) continue;
                const qty = cart[id];
                const item = document.createElement('div');
                item.className = 'cart-item';
                item.innerHTML = `
                    <div style="width:44px;height:44px;border-radius:8px;background:#fff;display:grid;place-items:center;font-size:20px">üçé</div>
                    <div style="min-width:0">
                        <div class="name">${product.name}</div>
                        <div class="meta" style="font-size:13px;color:var(--muted)">$${product.price.toFixed(2)} / lb</div>
                    </div>
                    <div style="margin-left:auto;display:flex;gap:6px;align-items:center">
                        <input type="number" min="0" value="${qty}" style="width:60px;padding:6px;border-radius:6px;border:1px solid #ddd" data-update="${id}" aria-label="Quantity for ${product.name}"/>
                        <div class="qty">$${(product.price * qty).toFixed(2)}</div>
                        <button class="btn secondary" data-remove="${id}" title="Remove ${product.name}">Remove</button>
                    </div>
                `;
                cartItemsEl.appendChild(item);
            }
            totalEl.textContent = '$' + cartTotal().toFixed(2);
            checkoutBtn.disabled = false;
        }

        // EVENT DELEGATION
        document.body.addEventListener('click', (e) => {
            const add = e.target.closest('[data-add]');
            if (add) {
                const id = add.getAttribute('data-add');
                const select = document.getElementById('qty-' + id);
                const qty = select ? select.value : 1;
                addToCart(id, qty);
                add.setAttribute('aria-pressed','true');
                setTimeout(()=>add.removeAttribute('aria-pressed'),120);
                return;
            }
            const rem = e.target.closest('[data-remove]');
            if (rem) {
                removeFromCart(rem.getAttribute('data-remove'));
                return;
            }
            if (e.target.id === 'clear-cart') {
                clearCart();
                return;
            }
            if (e.target.id === 'open-cart') {
                document.getElementById('cart').scrollIntoView({behavior:'smooth'});
            }
            if (e.target.id === 'checkout') {
                // simple mock checkout
                alert('Thank you! Checkout is a demo. Total: ' + totalEl.textContent);
                clearCart();
            }
        });

        // update qty inputs
        document.body.addEventListener('input', (e) => {
            const inp = e.target.closest('[data-update]');
            if (inp) {
                const id = inp.getAttribute('data-update');
                const val = Number(inp.value || 0);
                updateQty(id, val);
            }
        });

        // keyboard friendly: allow Enter on add buttons
        document.body.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && e.target && e.target.matches('select')) {
                const parent = e.target.closest('.card');
                if (!parent) return;
                const btn = parent.querySelector('[data-add]');
                if (btn) btn.click();
            }
        });

        // initialize
        renderProducts();
        renderCart();
    </script>
</body>
</html>